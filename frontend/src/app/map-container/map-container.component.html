<div class="intellectual-list columns" *ngIf="data">
    <div *ngFor="let author of data.authors" class="column author-column is-{{author.color}} has-text-centered is-clickable"
        [pTooltip]="tooltipMessage(author)" showDelay="600"
        [ngClass]="{'is-active': isActive(author)}"
        (click)="toggleAuthor(author)" (keydown.enter)="toggleAuthor(author)">

        <div class="author-image">
            <img *ngIf="pictures[author.id]" [src]="pictures[author.id]" alt="{{author.name}}" class="is-radiusless">
            <div *ngIf="!pictures[author.id]">{{author.name}}</div>
        </div>

        <div class="author-overlay">
            <div>{{author.name}}</div>

            <span class="icon show-icon"><fa-icon [icon]="icons.show"></fa-icon></span>
            <span class="icon hide-icon"><fa-icon [icon]="icons.hide"></fa-icon></span>
        </div>
    </div>
</div>

<div class="panel filter-menu is-dark" [ngClass]="{'is-collapsed': hideFilterMenu}" *ngIf="data">
    <p class="panel-heading is-clickable" (click)="hideFilterMenu = !hideFilterMenu">
        <span>Filter events</span>
    </p>
    <div class="panel-block">
        <div class="field">
            <label class="label">
                Type of event
            </label>
            <div class="control">
                <da-checkboxes [options]="categories"
                    [icons]="eventIcons"
                    (selection)="this.selectedCategories = $event; this.updateFilteredData()">
                </da-checkboxes>
            </div>
        </div>
    </div>
    <div class="panel-block">
        <div class="field">
            <label class="label">
                Year
            </label>
            <div class="control">
                <p-slider [range]="true" [min]="minYear" [max]="maxYear"
                [(ngModel)]="selectedDateRange" (onSlideEnd)="updateFilteredData()"></p-slider>
            </div>
        </div>

        <div class="columns">
            <div class="column">{{selectedDateRange[0]}}</div>
            <div class="column" style="text-align: right;">{{selectedDateRange[1]}}</div>
        </div>
    </div>
</div>

<da-map [data]="filteredData"></da-map>
